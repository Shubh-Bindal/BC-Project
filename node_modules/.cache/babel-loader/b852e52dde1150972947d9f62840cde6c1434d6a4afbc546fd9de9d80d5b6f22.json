{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sreedeva\\\\Desktop\\\\block_dao\\\\src\\\\components\\\\ProposalDetails.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { BarChart, Bar, CartesianGrid, XAxis, YAxis, Legend, Tooltip } from 'recharts';\n// import { getProposal, voteOnProposal } from '../Blockchain.services'\nimport { useGlobalState, daysRemaining } from '../store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProposalDetails = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [proposal, setProposal] = useState(null);\n  const [data, setData] = useState([]);\n  const [isStakeholder] = useGlobalState('isStakeholder');\n  useEffect(() => {\n    retrieveProposal();\n  }, [id]);\n  const retrieveProposal = async () => {\n    await getProposal(id).then(res => {\n      setProposal(res);\n      setData([{\n        name: 'Voters',\n        Acceptees: res === null || res === void 0 ? void 0 : res.upvotes,\n        Rejectees: res === null || res === void 0 ? void 0 : res.downvotes\n      }]);\n    });\n  };\n  const onVote = async choice => {\n    if (new Date().getTime() > Number(proposal.duration + '000')) {\n      toast.warning('Proposal expired!');\n      return;\n    }\n\n    // await voteOnProposal(id, choice)\n    toast.success('Voted successfully!');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"font-semibold text-3xl mb-5\",\n      children: proposal === null || proposal === void 0 ? void 0 : proposal.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"This proposal is to payout \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [proposal === null || proposal === void 0 ? void 0 : proposal.amount, \" Eth\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 36\n      }, this), \" and currently have\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [(proposal === null || proposal === void 0 ? void 0 : proposal.upvotes) + (proposal === null || proposal === void 0 ? void 0 : proposal.downvotes), \" votes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), \" and will expire in \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: daysRemaining(proposal === null || proposal === void 0 ? void 0 : proposal.duration)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"my-6 border-gray-300\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: proposal === null || proposal === void 0 ? void 0 : proposal.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row justify-start items-center w-full mt-4 overflow-auto\",\n      children: /*#__PURE__*/_jsxDEV(BarChart, {\n        width: 730,\n        height: 250,\n        data: data,\n        children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n          strokeDasharray: \"3 3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n          dataKey: \"name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"Acceptees\",\n          fill: \"#2563eb\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Bar, {\n          dataKey: \"Rejectees\",\n          fill: \"#dc2626\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row justify-start items-center space-x-3 mt-4\",\n      role: \"group\",\n      children: isStakeholder ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"inline-block px-6 py-2.5\\r bg-blue-600 text-white font-medium text-xs\\r leading-tight uppercase rounded-full shadow-md\\r hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700\\r focus:shadow-lg focus:outline-none focus:ring-0\\r active:bg-blue-800 active:shadow-lg transition\\r duration-150 ease-in-out dark:text-gray-300\\r dark:border dark:border-gray-500 dark:bg-transparent\",\n          \"data-mdb-ripple\": \"true\",\n          \"data-mdb-ripple-color\": \"light\",\n          onClick: () => onVote(true),\n          children: \"Accept\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"inline-block px-6 py-2.5\\r bg-blue-600 text-white font-medium text-xs\\r leading-tight uppercase rounded-full shadow-md\\r hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700\\r focus:shadow-lg focus:outline-none focus:ring-0\\r active:bg-blue-800 active:shadow-lg transition\\r duration-150 ease-in-out\\r dark:border dark:border-gray-500 dark:bg-transparent\",\n          \"data-mdb-ripple\": \"true\",\n          \"data-mdb-ripple-color\": \"light\",\n          onClick: () => onVote(false),\n          children: \"Reject\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(ProposalDetails, \"e9Em9nHh/+MDL9g8yIvuiZ97fSM=\", false, function () {\n  return [useParams, useGlobalState];\n});\n_c = ProposalDetails;\nexport default ProposalDetails;\nvar _c;\n$RefreshReg$(_c, \"ProposalDetails\");","map":{"version":3,"names":["useEffect","useState","useParams","toast","BarChart","Bar","CartesianGrid","XAxis","YAxis","Legend","Tooltip","useGlobalState","daysRemaining","ProposalDetails","id","proposal","setProposal","data","setData","isStakeholder","retrieveProposal","getProposal","then","res","name","Acceptees","upvotes","Rejectees","downvotes","onVote","choice","Date","getTime","Number","duration","warning","success","title","amount","description"],"sources":["C:/Users/Sreedeva/Desktop/block_dao/src/components/ProposalDetails.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { toast } from 'react-toastify'\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  CartesianGrid,\r\n  XAxis,\r\n  YAxis,\r\n  Legend,\r\n  Tooltip,\r\n} from 'recharts'\r\n// import { getProposal, voteOnProposal } from '../Blockchain.services'\r\nimport { useGlobalState, daysRemaining } from '../store'\r\n\r\nconst ProposalDetails = () => {\r\n  const { id } = useParams()\r\n  const [proposal, setProposal] = useState(null)\r\n  const [data, setData] = useState([])\r\n  const [isStakeholder] = useGlobalState('isStakeholder')\r\n\r\n    useEffect(() => {\r\n      retrieveProposal()\r\n    }, [id])\r\n\r\n    const retrieveProposal = async () => {\r\n      await getProposal(id).then((res) => {\r\n        setProposal(res)\r\n        setData([\r\n          {\r\n            name: 'Voters',\r\n            Acceptees: res?.upvotes,\r\n            Rejectees: res?.downvotes,\r\n          },\r\n        ])\r\n      })\r\n    }\r\n\r\n  const onVote = async (choice) => {\r\n    if (new Date().getTime() > Number(proposal.duration + '000')) {\r\n      toast.warning('Proposal expired!')\r\n      return\r\n    }\r\n\r\n    // await voteOnProposal(id, choice)\r\n    toast.success('Voted successfully!')\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-8\">\r\n      <h2 className=\"font-semibold text-3xl mb-5\">{proposal?.title}</h2>\r\n      <p>\r\n        This proposal is to payout <strong>{proposal?.amount} Eth</strong> and\r\n        currently have{' '}\r\n        <strong>{proposal?.upvotes + proposal?.downvotes} votes</strong> and\r\n        will expire in <strong>{daysRemaining(proposal?.duration)}</strong>\r\n      </p>\r\n      <hr className=\"my-6 border-gray-300\" />\r\n      <p>{proposal?.description}</p>\r\n      <div className=\"flex flex-row justify-start items-center w-full mt-4 overflow-auto\">\r\n        <BarChart width={730} height={250} data={data}>\r\n          <CartesianGrid strokeDasharray=\"3 3\" />\r\n          <XAxis dataKey=\"name\" />\r\n          <YAxis />\r\n          <Tooltip />\r\n          <Legend />\r\n          <Bar dataKey=\"Acceptees\" fill=\"#2563eb\" />\r\n          <Bar dataKey=\"Rejectees\" fill=\"#dc2626\" />\r\n        </BarChart>\r\n      </div>\r\n      <div\r\n        className=\"flex flex-row justify-start items-center space-x-3 mt-4\"\r\n        role=\"group\"\r\n      >\r\n        {isStakeholder ? (\r\n          <>\r\n            <button\r\n              type=\"button\"\r\n              className=\"inline-block px-6 py-2.5\r\n            bg-blue-600 text-white font-medium text-xs\r\n              leading-tight uppercase rounded-full shadow-md\r\n              hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700\r\n              focus:shadow-lg focus:outline-none focus:ring-0\r\n              active:bg-blue-800 active:shadow-lg transition\r\n              duration-150 ease-in-out dark:text-gray-300\r\n              dark:border dark:border-gray-500 dark:bg-transparent\"\r\n              data-mdb-ripple=\"true\"\r\n              data-mdb-ripple-color=\"light\"\r\n              onClick={() => onVote(true)}\r\n            >\r\n              Accept\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"inline-block px-6 py-2.5\r\n            bg-blue-600 text-white font-medium text-xs\r\n              leading-tight uppercase rounded-full shadow-md\r\n              hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700\r\n              focus:shadow-lg focus:outline-none focus:ring-0\r\n              active:bg-blue-800 active:shadow-lg transition\r\n              duration-150 ease-in-out\r\n              dark:border dark:border-gray-500 dark:bg-transparent\"\r\n              data-mdb-ripple=\"true\"\r\n              data-mdb-ripple-color=\"light\"\r\n              onClick={() => onVote(false)}\r\n            >\r\n              Reject\r\n            </button>\r\n          </>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProposalDetails\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}